{
  "namespace": "cube",
  "data_definitions": {
    "Color": {
      "type": "Enum",
      "constructors": ["Red", "Black", "Green", "Blue", "Orange", "White"]
    },
    "Face": {
      "type": "TypeAlias",
      "definition": {
        "constructor": "List",
        "vars": [
          {
            "constructor": "List",
            "vars": ["Color"]
          }
        ]
      }
    },
    "CubeSide": {
      "type": "Enum",
      "constructors": ["Front", "Back", "Up", "Down", "Left", "Right"]
    },
    "CubeState": {
      "type": "Record",
      "fields": {
        "front": "Face",
        "back": "Face",
        "up": "Face",
        "down": "Face",
        "left": "Face",
        "right": "Face"
      }
    },
    "Unit": {
      "type": "Unit"
    }
  },
  "function_definitions": {
    "createCubeFace": {
      "name": "createCubeFace",
      "args": [
        {
          "name": "color",
          "type": "Color"
        }
      ],
      "result_type": "Face",
      "body_structure": {
        "type": "ListLiteral",
        "elements": [
          {
            "type": "ListLiteral",
            "elements": [
              {
                "type": "Variable",
                "name": "color"
              },
              {
                "type": "Variable",
                "name": "color"
              },
              {
                "type": "Variable",
                "name": "color"
              }
            ]
          },
          {
            "type": "ListLiteral",
            "elements": [
              {
                "type": "Variable",
                "name": "color"
              },
              {
                "type": "Variable",
                "name": "color"
              },
              {
                "type": "Variable",
                "name": "color"
              }
            ]
          },
          {
            "type": "ListLiteral",
            "elements": [
              {
                "type": "Variable",
                "name": "color"
              },
              {
                "type": "Variable",
                "name": "color"
              },
              {
                "type": "Variable",
                "name": "color"
              }
            ]
          }
        ]
      }
    },
    "initializeCube": {
      "name": "initializeCube",
      "args": [],
      "result_type": "CubeState",
      "body_structure": {
        "type": "RecordCreation",
        "record_type": "CubeState",
        "fields": {
          "front": {
            "type": "FunctionCall",
            "function": {
              "type": "QualifiedIdentifier",
              "namespace": "cube",
              "name": "createCubeFace"
            },
            "arguments": [
              {
                "type": "ConstructorCall",
                "constructor": "Red",
                "arguments": []
              }
            ]
          },
          "back": {
            "type": "FunctionCall",
            "function": {
              "type": "QualifiedIdentifier",
              "namespace": "cube",
              "name": "createCubeFace"
            },
            "arguments": [
              {
                "type": "ConstructorCall",
                "constructor": "Orange",
                "arguments": []
              }
            ]
          },
          "up": {
            "type": "FunctionCall",
            "function": {
              "type": "QualifiedIdentifier",
              "namespace": "cube",
              "name": "createCubeFace"
            },
            "arguments": [
              {
                "type": "ConstructorCall",
                "constructor": "White",
                "arguments": []
              }
            ]
          },
          "down": {
            "type": "FunctionCall",
            "function": {
              "type": "QualifiedIdentifier",
              "namespace": "cube",
              "name": "createCubeFace"
            },
            "arguments": [
              {
                "type": "ConstructorCall",
                "constructor": "Black",
                "arguments": []
              }
            ]
          },
          "left": {
            "type": "FunctionCall",
            "function": {
              "type": "QualifiedIdentifier",
              "namespace": "cube",
              "name": "createCubeFace"
            },
            "arguments": [
              {
                "type": "ConstructorCall",
                "constructor": "Green",
                "arguments": []
              }
            ]
          },
          "right": {
            "type": "FunctionCall",
            "function": {
              "type": "QualifiedIdentifier",
              "namespace": "cube",
              "name": "createCubeFace"
            },
            "arguments": [
              {
                "type": "ConstructorCall",
                "constructor": "Blue",
                "arguments": []
              }
            ]
          }
        }
      }
    },
    "drawCubeFace": {
      "name": "drawCubeFace",
      "args": [
        {
          "name": "side",
          "type": "CubeSide"
        },
        {
          "name": "state",
          "type": "CubeState"
        }
      ],
      "result_type": "Unit",
      "body_structure": {
        "type": "Case",
        "scrutinee": {
          "type": "Variable",
          "name": "side"
        },
        "patterns": [
          {
            "pattern": {
              "type": "ConstructorPattern",
              "constructor": "Front",
              "args": []
            },
            "guard": null,
            "expression": {
              "type": "FunctionCall",
              "function": {
                "type": "QualifiedIdentifier",
                "namespace": null,
                "name": "print"
              },
              "arguments": [
                {
                  "type": "FieldAccess",
                  "target": {
                    "type": "Variable",
                    "name": "state"
                  },
                  "field": "front"
                }
              ]
            }
          },
          {
            "pattern": {
              "type": "ConstructorPattern",
              "constructor": "Back",
              "args": []
            },
            "guard": null,
            "expression": {
              "type": "FunctionCall",
              "function": {
                "type": "QualifiedIdentifier",
                "namespace": null,
                "name": "print"
              },
              "arguments": [
                {
                  "type": "FieldAccess",
                  "target": {
                    "type": "Variable",
                    "name": "state"
                  },
                  "field": "back"
                }
              ]
            }
          },
          {
            "pattern": {
              "type": "ConstructorPattern",
              "constructor": "Up",
              "args": []
            },
            "guard": null,
            "expression": {
              "type": "FunctionCall",
              "function": {
                "type": "QualifiedIdentifier",
                "namespace": null,
                "name": "print"
              },
              "arguments": [
                {
                  "type": "FieldAccess",
                  "target": {
                    "type": "Variable",
                    "name": "state"
                  },
                  "field": "up"
                }
              ]
            }
          },
          {
            "pattern": {
              "type": "ConstructorPattern",
              "constructor": "Down",
              "args": []
            },
            "guard": null,
            "expression": {
              "type": "FunctionCall",
              "function": {
                "type": "QualifiedIdentifier",
                "namespace": null,
                "name": "print"
              },
              "arguments": [
                {
                  "type": "FieldAccess",
                  "target": {
                    "type": "Variable",
                    "name": "state"
                  },
                  "field": "down"
                }
              ]
            }
          },
          {
            "pattern": {
              "type": "ConstructorPattern",
              "constructor": "Left",
              "args": []
            },
            "guard": null,
            "expression": {
              "type": "FunctionCall",
              "function": {
                "type": "QualifiedIdentifier",
                "namespace": null,
                "name": "print"
              },
              "arguments": [
                {
                  "type": "FieldAccess",
                  "target": {
                    "type": "Variable",
                    "name": "state"
                  },
                  "field": "left"
                }
              ]
            }
          },
          {
            "pattern": {
              "type": "ConstructorPattern",
              "constructor": "Right",
              "args": []
            },
            "guard": null,
            "expression": {
              "type": "FunctionCall",
              "function": {
                "type": "QualifiedIdentifier",
                "namespace": null,
                "name": "print"
              },
              "arguments": [
                {
                  "type": "FieldAccess",
                  "target": {
                    "type": "Variable",
                    "name": "state"
                  },
                  "field": "right"
                }
              ]
            }
          }
        ]
      }
    },
    "rotateRow": {
      "name": "rotateRow",
      "args": [
        {
          "name": "row",
          "type": "List{Color}"
        },
        {
          "name": "shift",
          "type": "Int"
        }
      ],
      "result_type": "List{Color}",
      "body_structure": {
        "type": "Let",
        "bindings": [
          {
            "name": "len",
            "value": {
              "type": "UnaryOp",
              "operator": "Length",
              "operand": {
                "type": "Variable",
                "name": "row"
              }
            }
          },
          {
            "name": "actualShift",
            "value": {
              "type": "BinaryOp",
              "operator": "Modulo",
              "left": {
                "type": "Variable",
                "name": "shift"
              },
              "right": {
                "type": "Variable",
                "name": "len"
              }
            }
          },
          {
            "name": "splitPoint",
            "value": {
              "type": "BinaryOp",
              "operator": "Subtract",
              "left": {
                "type": "Variable",
                "name": "len"
              },
              "right": {
                "type": "Variable",
                "name": "actualShift"
              }
            }
          }
        ],
        "body": {
          "type": "Let",
          "bindings": [
            {
              "name": "firstPart",
              "value": {
                "type": "FunctionCall",
                "function": {
                  "type": "QualifiedIdentifier",
                  "namespace": null,
                  "name": "take"
                },
                "arguments": [
                  {
                    "type": "Variable",
                    "name": "splitPoint"
                  },
                  {
                    "type": "Variable",
                    "name": "row"
                  }
                ]
              }
            },
            {
              "name": "secondPart",
              "value": {
                "type": "FunctionCall",
                "function": {
                  "type": "QualifiedIdentifier",
                  "namespace": null,
                  "name": "drop"
                },
                "arguments": [
                  {
                    "type": "Variable",
                    "name": "splitPoint"
                  },
                  {
                    "type": "Variable",
                    "name": "row"
                  }
                ]
              }
            }
          ],
          "body": {
            "type": "BinaryOp",
            "operator": "Append",
            "left": {
              "type": "Variable",
              "name": "secondPart"
            },
            "right": {
              "type": "Variable",
              "name": "firstPart"
            }
          }
        }
      }
    },
    "rotateFaceClockwise": {
      "name": "rotateFaceClockwise",
      "args": [
        {
          "name": "face",
          "type": "Face"
        }
      ],
      "result_type": "Face",
      "body_structure": {
        "type": "Let",
        "bindings": [
          {
            "name": "row0",
            "value": {
              "type": "ListAccess",
              "target": {
                "type": "Variable",
                "name": "face"
              },
              "index": {
                "type": "IntLiteral",
                "value": 0
              }
            }
          },
          {
            "name": "row1",
            "value": {
              "type": "ListAccess",
              "target": {
                "type": "Variable",
                "name": "face"
              },
              "index": {
                "type": "IntLiteral",
                "value": 1
              }
            }
          },
          {
            "name": "row2",
            "value": {
              "type": "ListAccess",
              "target": {
                "type": "Variable",
                "name": "face"
              },
              "index": {
                "type": "IntLiteral",
                "value": 2
              }
            }
          },
          {
            "name": "col0",
            "value": {
              "type": "ListLiteral",
              "elements": [
                {
                  "type": "ListAccess",
                  "target": {
                    "type": "Variable",
                    "name": "row2"
                  },
                  "index": {
                    "type": "IntLiteral",
                    "value": 0
                  }
                },
                {
                  "type": "ListAccess",
                  "target": {
                    "type": "Variable",
                    "name": "row1"
                  },
                  "index": {
                    "type": "IntLiteral",
                    "value": 0
                  }
                },
                {
                  "type": "ListAccess",
                  "target": {
                    "type": "Variable",
                    "name": "row0"
                  },
                  "index": {
                    "type": "IntLiteral",
                    "value": 0
                  }
                }
              ]
            }
          },
          {
            "name": "col1",
            "value": {
              "type": "ListLiteral",
              "elements": [
                {
                  "type": "ListAccess",
                  "target": {
                    "type": "Variable",
                    "name": "row2"
                  },
                  "index": {
                    "type": "IntLiteral",
                    "value": 1
                  }
                },
                {
                  "type": "ListAccess",
                  "target": {
                    "type": "Variable",
                    "name": "row1"
                  },
                  "index": {
                    "type": "IntLiteral",
                    "value": 1
                  }
                },
                {
                  "type": "ListAccess",
                  "target": {
                    "type": "Variable",
                    "name": "row0"
                  },
                  "index": {
                    "type": "IntLiteral",
                    "value": 1
                  }
                }
              ]
            }
          },
          {
            "name": "col2",
            "value": {
              "type": "ListLiteral",
              "elements": [
                {
                  "type": "ListAccess",
                  "target": {
                    "type": "Variable",
                    "name": "row2"
                  },
                  "index": {
                    "type": "IntLiteral",
                    "value": 2
                  }
                },
                {
                  "type": "ListAccess",
                  "target": {
                    "type": "Variable",
                    "name": "row1"
                  },
                  "index": {
                    "type": "IntLiteral",
                    "value": 2
                  }
                },
                {
                  "type": "ListAccess",
                  "target": {
                    "type": "Variable",
                    "name": "row0"
                  },
                  "index": {
                    "type": "IntLiteral",
                    "value": 2
                  }
                }
              ]
            }
          }
        ],
        "body": {
          "type": "ListLiteral",
          "elements": [
            {
              "type": "Variable",
              "name": "col0"
            },
            {
              "type": "Variable",
              "name": "col1"
            },
            {
              "type": "Variable",
              "name": "col2"
            }
          ]
        }
      }
    }
  }
}
